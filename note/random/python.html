<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.8" />
<title>[Python] Random - 在電梯裡遇見雙胞胎 | 傑洛米 Jeremy</title>
<link rel="stylesheet" href="../../_asciidoc/stylesheets/asciidoc.css" type="text/css" />
<link rel="stylesheet" href="../../_asciidoc/stylesheets/layout2.css" type="text/css" />
<link rel="stylesheet" href="../../_asciidoc/stylesheets/pygments.css" type="text/css" />
<script type="text/javascript" src="../../_asciidoc/javascripts/asciidoc.js"></script>
<script type="text/javascript">
/*<![CDATA[*/
asciidoc.install();
/*]]>*/
</script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-50d9b63d0e6d1b63"></script>
<script type="text/javascript">
  addthis.layers({
    'theme' : 'transparent',
    'share' : {
      'position' : 'right',
      'numPreferredServices' : 6
    },
    'follow' : {
      'services' : [
        {'service': 'facebook', 'id': 'jeremy.kao.92'},
        {'service': 'twitter', 'id': 'imsardine'},
        {'service': 'google_follow', 'id': '113911398965423340908'}
      ]
    }
  });
</script>
</head>
<body>
<div id="layout-content-box">
<div id="layout-banner">
  <div id="layout-title">在電梯裡遇見雙胞胎</div>
  <div id="layout-description"><a href="../../index.html">首頁</a> | <a href="../..//about-me.html">關於我</a> | <a href="../../note/index.html">筆記</a> // 腦袋不是用來裝東西，而是用來思考問題的；所以我把懶得記的、記不住的，通通寫在這裡...</div>
</div>
<div id="layout-content">
<div id="header">
<h1><a href="random.html">Random</a> / Python</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p>Python 內建 <code>random</code> 可以用來產生 pseudo-random numbers。例如：</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">random</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)]</span>        <span class="c"># <img src="../../_asciidoc/images/icons/callouts/1.png" alt="1" /></span>
<span class="go">[0.2046831942202948, 0.27349020549237124, 0.36018432545783086, 0.22738618725393034, 0.0906220334907547]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span> <span class="c"># <img src="../../_asciidoc/images/icons/callouts/2.png" alt="2" /></span>
<span class="go">[16, 17, 3, 8, 12, 18, 5, 13, 1, 19]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
<span class="go">[5, 5, 4, 2, 4, 20, 8, 18, 8, 16]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">seq</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;apple&#39;</span><span class="p">,</span> <span class="s">&#39;orange&#39;</span><span class="p">,</span> <span class="s">&#39;pineapple&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">seq</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>    <span class="c"># <img src="../../_asciidoc/images/icons/callouts/3.png" alt="3" /></span>
<span class="go">[&#39;apple&#39;, &#39;apple&#39;, &#39;orange&#39;, &#39;pineapple&#39;, &#39;apple&#39;, &#39;pineapple&#39;, &#39;pineapple&#39;, &#39;orange&#39;, &#39;apple&#39;, &#39;orange&#39;]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">seq</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)]</span>  <span class="c"># <img src="../../_asciidoc/images/icons/callouts/4.png" alt="4" /></span>
<span class="go">[[&#39;orange&#39;, &#39;apple&#39;], [&#39;apple&#39;, &#39;pineapple&#39;], [&#39;apple&#39;, &#39;pineapple&#39;], [&#39;orange&#39;, &#39;pineapple&#39;], [&#39;apple&#39;, &#39;orange&#39;]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">xrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10000</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="mi">5</span><span class="p">)</span>      <span class="c"># <img src="../../_asciidoc/images/icons/callouts/5.png" alt="5" /></span>
<span class="go">[6936, 1844, 6208, 4610, 5544]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">python</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;p&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="s">&#39;t&#39;</span><span class="p">,</span> <span class="s">&#39;h&#39;</span><span class="p">,</span> <span class="s">&#39;o&#39;</span><span class="p">,</span> <span class="s">&#39;n&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span> <span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">python</span><span class="p">);</span> <span class="k">print</span> <span class="n">python</span> <span class="c"># <img src="../../_asciidoc/images/icons/callouts/6.png" alt="6" /></span>
<span class="gp">...</span>
<span class="go">[&#39;p&#39;, &#39;n&#39;, &#39;t&#39;, &#39;y&#39;, &#39;h&#39;, &#39;o&#39;]</span>
<span class="go">[&#39;n&#39;, &#39;h&#39;, &#39;t&#39;, &#39;p&#39;, &#39;o&#39;, &#39;y&#39;]</span>
<span class="go">[&#39;t&#39;, &#39;o&#39;, &#39;h&#39;, &#39;y&#39;, &#39;p&#39;, &#39;n&#39;]</span>
<span class="go">[&#39;t&#39;, &#39;o&#39;, &#39;h&#39;, &#39;p&#39;, &#39;n&#39;, &#39;y&#39;]</span>
<span class="go">[&#39;t&#39;, &#39;h&#39;, &#39;o&#39;, &#39;n&#39;, &#39;y&#39;, &#39;p&#39;]</span>
</pre></div></div></div>
<div class="colist arabic"><table>
<tr><td><img src="../../_asciidoc/images/icons/callouts/1.png" alt="1" /></td><td>
<code>random()</code> 會產生一個浮點數（<code>[0.0, 1.0)</code>），是其他 functions 的基礎。
</td></tr>
<tr><td><img src="../../_asciidoc/images/icons/callouts/2.png" alt="2" /></td><td>
<code>randint(a, b)</code> 可以產生一個介於 <em>a</em> 跟 <em>b</em> 之間的亂數 <em>N</em> (<code>a &lt;= N &lt;= b</code>)。
</td></tr>
<tr><td><img src="../../_asciidoc/images/icons/callouts/3.png" alt="3" /></td><td>
<code>choice(seq)</code> 可以從 <em>seq</em> 隨機選出一個項目，如果 <em>seq</em> 是空的，則會丟出 <code>IndexError</code>。
</td></tr>
<tr><td><img src="../../_asciidoc/images/icons/callouts/4.png" alt="4" /></td><td>
<code>sample(seq, n)</code> 跟 <code>choice()</code> 類似，但一次取出 <em>n</em> 個不重複的項目。
</td></tr>
<tr><td><img src="../../_asciidoc/images/icons/callouts/5.png" alt="5" /></td><td>
<code>sample()</code> 可以搭配 <code>xrange()</code> 有效地取出 "大範圍" 內的多個數值。例如這裡示範一次取出 5 個 0 ~ 10000 之間的偶數。
</td></tr>
<tr><td><img src="../../_asciidoc/images/icons/callouts/6.png" alt="6" /></td><td>
<code>shuffle(seq)</code> 可以就地（in place）將 <em>seq</em> 內各資料項之間的順序打亂。
</td></tr>
</table></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../../_asciidoc/images/icons/tip.png" alt="Tip" />
</td>
<td class="content">
<div class="paragraph"><p><code>random</code> 這個 module 第一次被 import 時，內部會生成一個 <code>random.Random</code>，上面這些 module-level functions 其實是源自該 hidden instance。</p></div>
<div class="listingblock">
<div class="title"><code>random.py</code></div>
<div class="content"><div class="highlight"><pre><span class="c"># Create one instance, seeded from current time, and export its methods</span>
<span class="c"># as module-level functions.  The functions share state across all uses</span>
<span class="c">#(both in the user&#39;s code and in the Python libraries), but that&#39;s fine</span>
<span class="c"># for most programs and is easier for the casual user than making them</span>
<span class="c"># instantiate their own Random() instance.</span>

<span class="n">_inst</span> <span class="o">=</span> <span class="n">Random</span><span class="p">()</span>
<span class="n">seed</span> <span class="o">=</span> <span class="n">_inst</span><span class="o">.</span><span class="n">seed</span>
<span class="n">random</span> <span class="o">=</span> <span class="n">_inst</span><span class="o">.</span><span class="n">random</span>
<span class="n">uniform</span> <span class="o">=</span> <span class="n">_inst</span><span class="o">.</span><span class="n">uniform</span>
<span class="n">triangular</span> <span class="o">=</span> <span class="n">_inst</span><span class="o">.</span><span class="n">triangular</span>
<span class="n">randint</span> <span class="o">=</span> <span class="n">_inst</span><span class="o">.</span><span class="n">randint</span>
<span class="n">choice</span> <span class="o">=</span> <span class="n">_inst</span><span class="o">.</span><span class="n">choice</span>
<span class="n">randrange</span> <span class="o">=</span> <span class="n">_inst</span><span class="o">.</span><span class="n">randrange</span>
<span class="n">sample</span> <span class="o">=</span> <span class="n">_inst</span><span class="o">.</span><span class="n">sample</span>
<span class="n">shuffle</span> <span class="o">=</span> <span class="n">_inst</span><span class="o">.</span><span class="n">shuffle</span>
</pre></div></div></div>
</td>
</tr></table>
</div>
<div class="paragraph"><p>背後預設採用 Mersenne Twister 做為 generator，不過 <em>completely deterministic</em> 的特性，使得它不適合用在密碼學安全領域，當然這也是為什麼被稱做 <em>pseudo</em> 的原因。</p></div>
<div class="quoteblock">
<div class="content">
<div class="paragraph"><p>The Mersenne Twister is one of the most extensively tested random number generators in existence. However, being <em>completely deterministic</em>, it is not suitable for all purposes, and is completely unsuitable for cryptographic purposes.</p></div>
</div>
<div class="attribution">
&#8212; <a href="http://docs.python.org/2/library/random.html">random — Generate pseudo-random numbers — The Python Standard Library</a>
</div></div>
<div class="quoteblock">
<div class="content">
<div class="paragraph"><p>You can generate a pseudo-random number with the <code>random</code> module. Sufficient for games (perhaps with a wrapper to even out distributions percived as "unfair"), <em>distributions that seem unpredictable to users (note that "random" != "even distribution")</em>, etc. but not suitable for cryptographic use or anything else that can be demolished by the fact that the generated numbers are <em>deterministic when re-starting with the same seed</em>. Don&#8217;t think of them as truly random, they aren&#8217;t.</p></div>
</div>
<div class="attribution">
<em><a href="http://stackoverflow.com/questions/5555712/generate-a-random-number-in-python">Generate a random number in python - Stack Overflow</a></em><br />
&#8212; delnan
</div></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">999</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
<span class="go">[16, 2, 18, 12, 10, 3, 16, 7, 16, 17]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
<span class="go">[2, 20, 4, 6, 12, 15, 6, 18, 20, 5]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">999</span><span class="p">)</span> <span class="c"># <img src="../../_asciidoc/images/icons/callouts/1.png" alt="1" /></span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
<span class="go">[16, 2, 18, 12, 10, 3, 16, 7, 16, 17]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
<span class="go">[2, 20, 4, 6, 12, 15, 6, 18, 20, 5]</span>
</pre></div></div></div>
<div class="colist arabic"><table>
<tr><td><img src="../../_asciidoc/images/icons/callouts/1.png" alt="1" /></td><td>
透過相同的 seed 去初始化，會得到相同的 random sequence。
</td></tr>
</table></div>
<div class="paragraph"><p>還好 hidden instance (<code>random.Random</code>) 預設採用 current system time 做為 seed，所以通常問題不大。</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_參考資料">參考資料</h2>
<div class="sectionbody">
<div class="openblock">
<div class="title">文件</div>
<div class="content">
<div class="ulist"><ul>
<li>
<p>
<a href="http://docs.python.org/2/library/random.html">random — Generate pseudo-random numbers — The Python Standard Library</a>
</p>
</li>
</ul></div>
<div class="ulist"><ul>
<li>
<p>
<a href="http://en.wikipedia.org/wiki/Mersenne_twister">Mersenne twister - Wikipedia, the free encyclopedia</a>
</p>
</li>
</ul></div>
</div></div>
<div class="openblock">
<div class="title">其他文件</div>
<div class="content">
<div class="ulist"><ul>
<li>
<p>
<a href="http://stackoverflow.com/questions/5555712/generate-a-random-number-in-python">Generate a random number in python - Stack Overflow</a> <sup><a href="https://diigo.com/010gf0">閱讀</a></sup> (2011-04-05)
</p>
</li>
</ul></div>
<div class="ulist"><ul>
<li>
<p>
<a href="http://stackoverflow.com/questions/306400/how-do-i-randomly-select-an-item-from-a-list-using-python/306417#306417">How do I randomly select an item from a list using Python? - Stack Overflow</a> (2008-11-20)
</p>
</li>
</ul></div>
</div></div>
</div>
</div>
<div id="disqus_thread"></div>
<script type="text/javascript">
var disqus_shortname = 'imsardine'; // required: replace example with your forum shortname
(function() {
var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<!--div id="footer-text">
Last updated 2013-10-13 20:54:51 CST
</div-->
</div>
</div>
</div>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" src="http://s.gravatar.com/js/gprofiles.js?ver=e"></script>
<script>jQuery(document).ready(function($){ Gravatar.init(); });</script>
</body>
</html>
