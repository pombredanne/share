= link:bash.html[Bash] / 以相對位置呼叫另一支 Script =
:title: 以相對位置呼叫另一支 Script

.`/tmp/foo.sh`
--------------------------------------------------------------------------------
#!/bin/sh

echo foo
sh bar.sh
--------------------------------------------------------------------------------

.`/tmp/bar.sh`
--------------------------------------------------------------------------------
#!/bin/sh

echo bar
--------------------------------------------------------------------------------

沒想到這麼直覺的寫法也會出錯：

--------------------------------------------------------------------------------
/tmp$ sh foo.sh 
foo
bar
/tmp$ cd ..
/$ sh tmp/foo.sh 
foo
sh: Can't open bar.sh <1>
--------------------------------------------------------------------------------
<1> 因為在 CWD (`/`) 底下找不到 `bar.sh`。

可以借用 `dirname $0` 來找出呼叫端 link:fullpath-self.html[script 的位置]，以相對位置定位到另一支 script：

.`/tmp/foo.sh`
--------------------------------------------------------------------------------
#!/bin/sh

echo foo
sh `dirname $0`/bar.sh
--------------------------------------------------------------------------------

重新再測試一遍：

--------------------------------------------------------------------------------
/tmp$ sh foo.sh 
foo
bar
/tmp$ cd ..
/$ sh tmp/foo.sh 
foo
bar
--------------------------------------------------------------------------------

== 參考資料 ==

 * http://stackoverflow.com/questions/192292/bash-how-best-to-include-other-scripts[linux - Bash: How _best_ to include other scripts? - Stack Overflow] (2008-10-10)

