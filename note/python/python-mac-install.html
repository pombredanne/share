<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.8" />
<title>[Python][Mac] 在 Mac 上安裝 Python</title>
<link rel="stylesheet" href="../../_asciidoc/stylesheets/asciidoc.css" type="text/css" />
<link rel="stylesheet" href="../../_asciidoc/stylesheets/layout2.css" type="text/css" />
<link rel="stylesheet" href="../../_asciidoc/stylesheets/pygments.css" type="text/css" />
<link rel="Stylesheet" href="http://www.diigo.com/stylesheets/link_rolls_standard.css" title="style_standard" type="text/css" media="screen" />
<script type="text/javascript" src="../../_asciidoc/javascripts/asciidoc.js"></script>
<script type="text/javascript">
/*<![CDATA[*/
asciidoc.install();
/*]]>*/
</script>
</head>
<body>
<div id="layout-menu-box">
<div id="layout-menu">
  <div><a href="../../index.html">首頁</a> | <a href="http://www.diigo.com/user/imsardine" target="_blank">閱讀</a> | <a href="../../note/index.html">筆記</a></div>
  <div>
    <img src="http://www.gravatar.com/avatar/ca5d67276ca1ff3e5391438d7865ddf2" width="32" style="border:none"/>
    <a href="http://imsardine.wordpress.com/" target="_blank"><img src="http://s.wordpress.org/about/images/logos/wordpress-logo-32-blue.png" style="border:none"/></a>
  </div>
  <iframe src="http://githubbadge.appspot.com/badge/imsardine?s=1" style="border: 0;height: 142px;width: 200px;overflow: hidden;" frameBorder=0></iframe>
</div>
</div>
<div id="layout-content-box">
<div id="layout-banner">
  <div id="layout-title">在電梯裡遇見雙胞胎</div>
  <div id="layout-description">腦袋不是用來裝東西，而是用來思考問題的；所以我把懶得記的、記不住的，通通寫在這裡... <a href="http://www.diigo.com" onclick="var s=document.createElement('script');s.type='text/javascript';s.src='http://www.diigo.com/javascripts/webtoolbar/diigolet_b_h_b.js';document.body.appendChild(s);return false;"><img style="border:none" alt="Add to Diigo" src="http://www.diigo.com/images/diigo-icon/16.png" /></a></div>
</div>
<div id="layout-content">
<div id="header">
<h1>[Python][Mac] 在 Mac 上安裝 Python</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p>Mac 內建的 Python 通常比較舊，要安裝 Python 2.x 的話：</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
從<a href="http://www.python.org/getit/">官網</a>分別下載到 Mac OS X 10.3 - 10.6 (32-bit i386/PPC; <code>python-2.7.3-macosx10.3.dmg</code>) 或 Mac OS X 10.6 - 10.7 (64-bit/32-bit x86-64/i386; <code>python-2.7.3-macosx10.6.dmg</code>) 的版本。
</p>
</li>
<li>
<p>
點開 <code>.dmp</code> 後可以透過 <code>Python.mpkg</code> 開始進行安裝。
</p>
</li>
</ol></div>
<div class="paragraph"><p>例如 Mac OS X 10.6 Snow Leopard 預設採用 Python 2.6.1，安裝 Python 2.7.3 時，預設會安裝到 <code>/Library/Frameworks/Python.framework/Versions/&lt;version&gt;/</code> 底下，打開 shell 查看 <code>PATH</code> 的設定，已經被調整過：（完整的 log 可以參考<a href="python-mac-install/10.6_server_install.log">這裡</a>）</p></div>
<div class="literalblock">
<div class="content">
<pre><code>/Library/Frameworks/Python.framework/Versions/2.7/bin:/usr/bin:/bin:/usr/sbin:/sbin:usr/local/bin</code></pre>
</div></div>
<div class="paragraph"><p>不知道是加在什麼地方？因為 <code>/etc/paths</code> 或 <code>/etc/paths.d/</code> 下都找不到 Python 路徑的設定&#8230; 如果是 root 的話，情況又不太一樣了：</p></div>
<div class="literalblock">
<div class="content">
<pre><code>/usr/bin:/bin:/usr/sbin:/sbin:usr/local/bin:/Library/Frameworks/Python.framework/Versions/2.7/bin</code></pre>
</div></div>
<div class="paragraph"><p>Mac OS X Lion 內建 Python 2.7.1，還是可以透過官方的安裝程式昇級到較新的版本。之前昇級到 2.7.3 (<code>python-2.7.3-macosx10.6.dmg</code>) 時，發生了一些小混亂&#8230; 最後的決定是，在還沒有搞清楚狀況之前，還是保留 Python 2.7.1 即可。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../../_asciidoc/images/icons/note.png" alt="Note" />
</td>
<td class="content">
<div class="title">Mac OS X Lion 昇級 Python 2.7.3 的小災難</div>
<div class="paragraph"><p>安裝程式會在 <code>~/.bash_profile</code> 寫入下面這段設定：</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ cat ~/.bash_profile
# Setting PATH for Python 2.7
# The orginal version is saved in .bash_profile.pysave
PATH="/Library/Frameworks/Python.framework/Versions/2.7/bin:${PATH}"
export PATH</code></pre>
</div></div>
<div class="paragraph"><p>觀察執行 <code>python</code> 跟 <code>/usr/bin/python</code> 的差異：</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ which python
/Library/Frameworks/Python.framework/Versions/2.7/bin/python
$ python
Python 2.7.3 (v2.7.3:70274d53c1dd, Apr  9 2012, 20:52:43)
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
&gt;&gt;&gt; import sys; sys.path
['', '/usr/local/lib/wxPython-unicode-2.8.12.1/lib/python2.7/site-packages', '/usr/local/lib/wxPython-unicode-2.8.12.1/lib/python2.7/site-packages/wx-2.8-mac-unicode', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python27.zip', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-old', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages', '/Library/Python/2.7/site-packages', '/usr/local/lib/wxPython-unicode-2.8.12.1/lib/python2.7']
&gt;&gt;&gt; ^D
$ /usr/bin/python
Python 2.7.1 (r271:86832, Jul 31 2011, 19:30:53)
[GCC 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
&gt;&gt;&gt; import sys; sys.path
['', '/usr/local/lib/wxPython-unicode-2.8.12.1/lib/python2.7/site-packages', '/usr/local/lib/wxPython-unicode-2.8.12.1/lib/python2.7/site-packages/wx-2.8-mac-unicode', '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python27.zip', '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7', '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin', '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac', '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages', '/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python', '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk', '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-old', '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload', '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages', '/Library/Python/2.7/site-packages', '/usr/local/lib/wxPython-unicode-2.8.12.1/lib/python2.7']
&gt;&gt;&gt; ^D</code></pre>
</div></div>
<div class="ulist"><ul>
<li>
<p>
Python 2.7.1 - <code>/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages</code>, <code>/Library/Python/2.7/site-packages</code>
</p>
</li>
<li>
<p>
Python 2.7.3 - <code>/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages</code>, <code>/Library/Python/2.7/site-packages</code>
</p>
</li>
</ul></div>
<div class="paragraph"><p>觀察發現 Python 2.7.1 會把新安裝的東西寫到 <code>/Library/Python/2.7/site-packages</code>，Python 2.7.3 則是寫到 <code>/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages</code>。但 <code>/Library/Python/2.7/site-packages</code> 卻同時出現在 Python 2.7.1/2.7.3 的 path 裡，刻意設計成這樣，該不會 Python 2.7.3 想同時吃到在 Python 2.7.1 下安裝的其他套件？</p></div>
<div class="paragraph"><p>問題在於 <code>/usr/bin/python</code> 並沒有被取代成 Python 2.7.3，返倒還是停留在舊的 Python 2.7.1，不曉得是不是怕影響到底層系統工具？但這肯定會造成 shell script 因為 shebang 寫法上 <code>#!/usr/bin/env python</code> 與 <code>#!/usr/bin/python</code> 的不同，造成行為上的差異。例如某些工具出現 "ImportError: cannot import name urandom" 的問題：</p></div>
<div class="listingblock">
<div class="content">
<pre><code>  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/random.py", line 47, in &lt;module&gt;
    from os import urandom as _urandom
ImportError: cannot import name urandom</code></pre>
</div></div>
<div class="paragraph"><p>搜尋的結果<a href="https://bugs.launchpad.net/ubuntu/+source/python2.7/+bug/954595">大多指向</a>是因為新舊版 Python interpreter 混用所造成，細查之下才發現是因為 <code>#!/usr/bin/python</code> 的寫法造成沒有執行到環境內較新的 Python 2.7.3。雖然還是搞不清楚為什麼會丟出 "cannot import name urandom"，總之將 shebang 從 <code>#!/usr/bin/python</code> 換成 <code>#!/usr/bin/env python</code> 就好了。</p></div>
<div class="paragraph"><p>後來發現問題的根源可能不是因為昇級 Python 2.7.3，而是之前裝 PyDev 時，自行下載原始碼硬放進 <code>/System/Library/Frameworks/Python.framework/Version/2.7/lib/python2.7</code> 的關係。這或許可以說明為什麼網路上沒有人在提類似的問題&#8230;</p></div>
</td>
</tr></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_延伸閱讀">延伸閱讀</h2>
<div class="sectionbody">
<div class="ulist"><ul>
<li>
<p>
<a href="python-mac.html">Mac 上的 Python</a>
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="_參考資料">參考資料</h2>
<div class="sectionbody">
<div class="ulist"><ul>
<li>
<p>
<a href="http://www.python.org/getit/">Download Python</a>
</p>
<div class="ulist"><ul>
<li>
<p>
<a href="http://www.python.org/getit/mac/">Python on the Macintosh</a>
</p>
</li>
</ul></div>
</li>
<li>
<p>
<a href="http://stackoverflow.com/questions/10445666/mac-osx-switch-to-python-2-7-3">Mac OSX: Switch to Python 2.7.3 - Stack Overflow</a> (2012-05-04)
</p>
</li>
</ul></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated 2012-12-15 20:49:07 CST
</div>
<div id="footer-badges">
<a href="http://validator.w3.org/check?uri=referer">
  <img style="border:0;width:88px;height:31px"
    src="http://www.w3.org/Icons/valid-xhtml11-blue"
    alt="Valid XHTML 1.1" height="31" width="88" />
</a>
<a href="http://jigsaw.w3.org/css-validator/">
  <img style="border:0;width:88px;height:31px"
    src="http://jigsaw.w3.org/css-validator/images/vcss-blue"
    alt="Valid CSS!" />
</a>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" src="http://s.gravatar.com/js/gprofiles.js?ver=e"></script>
<script>jQuery(document).ready(function($){ Gravatar.init(); });</script>
</body>
</html>
