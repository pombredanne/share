<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.8" />
<title>Learning Python Language</title>
<link rel="stylesheet" href="../../_asciidoc/stylesheets/asciidoc.css" type="text/css" />
<link rel="stylesheet" href="../../_asciidoc/stylesheets/layout2.css" type="text/css" />
<link rel="stylesheet" href="../../_asciidoc/stylesheets/pygments.css" type="text/css" />
<link rel="Stylesheet" href="http://www.diigo.com/stylesheets/link_rolls_standard.css" title="style_standard" type="text/css" media="screen" />
<script type="text/javascript" src="../../_asciidoc/javascripts/asciidoc.js"></script>
<script type="text/javascript">
/*<![CDATA[*/
asciidoc.install();
/*]]>*/
</script>
</head>
<body>
<div id="layout-menu-box">
<div id="layout-menu">
  <div><a href="../../index.html">首頁</a> | <a href="http://www.diigo.com/user/imsardine" target="_blank">閱讀</a> | <a href="../../note/index.html">筆記</a></div>
  <div>
    <img src="http://www.gravatar.com/avatar/ca5d67276ca1ff3e5391438d7865ddf2" width="32" style="border:none"/>
    <a href="http://imsardine.wordpress.com/" target="_blank"><img src="http://s.wordpress.org/about/images/logos/wordpress-logo-32-blue.png" style="border:none"/></a>
  </div>
  <iframe src="http://githubbadge.appspot.com/badge/imsardine?s=1" style="border: 0;height: 142px;width: 200px;overflow: hidden;" frameBorder=0></iframe>
</div>
</div>
<div id="layout-content-box">
<div id="layout-banner">
  <div id="layout-title">在電梯裡遇見雙胞胎</div>
  <div id="layout-description">腦袋不是用來裝東西，而是用來思考問題的；所以我把懶得記的、記不住的，通通寫在這裡... <a href="http://www.diigo.com" onclick="var s=document.createElement('script');s.type='text/javascript';s.src='http://www.diigo.com/javascripts/webtoolbar/diigolet_b_h_b.js';document.body.appendChild(s);return false;"><img style="border:none" alt="Add to Diigo" src="http://www.diigo.com/images/diigo-icon/16.png" /></a></div>
</div>
<div id="layout-content">
<div id="header">
<h1>Learning Python Language</h1>
</div>
<div class="g-plusone" data-annotation="inline" data-width="300"></div>
<div id="content">
<div class="sect1">
<h2 id="_flow_control">Flow Control</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre><code>&gt;&gt;&gt; def expression(condition):
...     print 'expression got called (%s)' % condition
...     return condition
...
&gt;&gt;&gt; True and expression(True)
expression got called (True)
True
&gt;&gt;&gt; False and expression(True) <img src="../../_asciidoc/images/icons/callouts/1.png" alt="1" />
False</code></pre>
</div></div>
<div class="colist arabic"><table>
<tr><td><img src="../../_asciidoc/images/icons/callouts/1.png" alt="1" /></td><td>
當 <code>False</code> 已經可以決定結果時，<code>expresssion()</code> 就不會再被呼叫評估。
</td></tr>
</table></div>
</div>
</div>
<div class="sect1">
<h2 id="_class">Class</h2>
<div class="sectionbody">
</div>
</div>
<div class="sect1">
<h2 id="_attribute">Attribute</h2>
<div class="sectionbody">
<div class="paragraph"><p>&#8230;</p></div>
<div class="sect2">
<h3 id="_property">Property</h3>
<div class="listingblock">
<div class="content">
<pre><code>class Person(object):

    def __init__(self, first_name, last_name):
        self._first_name = first_name
        self._last_name = last_name

    def _get_name(self):
        return '%s, %s' % (self._first_name, self._last_name)

    name = property(_get_name)

print Person('Jeremy', 'Kao').name</code></pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../../_asciidoc/images/icons/note.png" alt="Note" />
</td>
<td class="content">
<div class="title">參考資料</div>
<div class="ulist"><ul>
<li>
<p>
<a href="http://oreilly.com/catalog/9780596158071/">O&#8217;Reilly - Learning Python, Fourth Edition</a>
</p>
<div class="ulist"><ul>
<li>
<p>
Chapter 31. Advanced Class Topics &gt; Class Properties (p792)
</p>
</li>
<li>
<p>
Chapter 37. Managed Attributes (p941)
</p>
</li>
</ul></div>
</li>
<li>
<p>
<a href="http://wiki.python.org/jython/JythonFaq/GeneralInfo#How_do_I_learn_more_about_Jython.3F">JythonFaq &gt; General Information</a> - 這裡提到 Jython 2.5.0 就已經把 Python 2.6 才有的 decorator 做進來了
</p>
</li>
<li>
<p>
<a href="http://kbyanc.blogspot.com/2007/06/python-property-attribute-tricks.html">The Other Kelly Yancey: Python: property attribute tricks</a> (2007-06-19)
</p>
</li>
</ul></div>
</td>
</tr></table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_descriptor">Descriptor</h2>
<div class="sectionbody">
<div class="paragraph"><p>&#8230;</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_yield">yield</h2>
<div class="sectionbody">
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../../_asciidoc/images/icons/note.png" alt="Note" />
</td>
<td class="content">
<div class="title">參加資料</div>
<div class="ulist"><ul>
<li>
<p>
<a href="http://stackoverflow.com/questions/231767/the-python-yield-keyword-explained/231855#231855">The Python yield keyword explained - Stack Overflow</a> (2008-10-23)
</p>
</li>
</ul></div>
</td>
</tr></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_搞清楚_code_code_跟_code_is_code_的差別">搞清楚 <code>==</code> 跟 <code>is</code> 的差別</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre><code>&gt;&gt;&gt; s1 = 'hello' + ', world'
&gt;&gt;&gt; s2 = 'hello, ' + 'world'
&gt;&gt;&gt; s1 == s2
True
&gt;&gt;&gt; s1 is s2
False

&gt;&gt;&gt; None == None
True
&gt;&gt;&gt; None != None
False
&gt;&gt;&gt; None &gt; None
False
&gt;&gt;&gt; None &lt; None
False
&gt;&gt;&gt; None &gt; 0
False
&gt;&gt;&gt; None &lt; 0
True

&gt;&gt;&gt; None is None
True
&gt;&gt;&gt; None is not None
False</code></pre>
</div></div>
</div>
</div>
<div class="sect1">
<h2 id="_object_id">Object ID</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre><code>&gt;&gt;&gt; class MyObj: pass
...
&gt;&gt;&gt; o1 = MyObj()
&gt;&gt;&gt; o2 = MyObj()
&gt;&gt;&gt; o1, o2
(&lt;__main__.MyObj instance at 0x7feea2bc1e60&gt;, &lt;__main__.MyObj instance at 0x7feea2bc1248&gt;) <img src="../../_asciidoc/images/icons/callouts/1.png" alt="1" />
&gt;&gt;&gt; hex(id(o1))
'0x7feea2bc1e60'
&gt;&gt;&gt; o1 == o2
False
&gt;&gt;&gt;</code></pre>
</div></div>
<div class="colist arabic"><table>
<tr><td><img src="../../_asciidoc/images/icons/callouts/1.png" alt="1" /></td><td>
後面帶的 <code>0x...</code> 就是 object ID。
</td></tr>
<tr><td><img src="../../_asciidoc/images/icons/callouts/2.png" alt="2" /></td><td>
Object ID 可以用 <code>id()</code> 取得。
</td></tr>
</table></div>
</div>
</div>
<div class="sect1">
<h2 id="_class_2">Class</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_inner_nested_class">Inner/Nested Class</h3>
<div class="listingblock">
<div class="content">
<pre><code>def init_name_obj(first, last):

    class Name: <img src="../../_asciidoc/images/icons/callouts/1.png" alt="1" />

        def __init__(self, first, last):
            self.first = first
            self.last = last

    return Name(first, last)

name = init_name_obj('Jeremy', 'Kao')
print name.first, name.last</code></pre>
</div></div>
<div class="colist arabic"><table>
<tr><td><img src="../../_asciidoc/images/icons/callouts/1.png" alt="1" /></td><td>
Class 也可以定義在 function/method 裡，但由於 <code>class</code> 是個 statement，所以會有重複定義的狀況？
</td></tr>
</table></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../../_asciidoc/images/icons/note.png" alt="Note" />
</td>
<td class="content">
<div class="title">參考資料</div>
<div class="ulist"><ul>
<li>
<p>
<a href="http://www.brpreiss.com/books/opus7/html/page598.html">Python and Object-Oriented Programming &gt; Nested Classes</a>
</p>
</li>
<li>
<p>
<a href="http://tomayko.com/writings/python-inner-classes">Python Inner Classes</a> (2004-09-05)
</p>
</li>
</ul></div>
</td>
</tr></table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_source_code_encodings">Source Code Encodings</h2>
<div class="sectionbody">
<div class="paragraph"><p>Python 預設採用 ASCII 來讀取 source code 的內容，如果要採用其他 encoding 的話，必須在 shebang line 之後（如果有的話）加上 encoding 的宣告：</p></div>
<div class="listingblock">
<div class="content">
<pre><code>#!/usr/bin/env python
# -*- encoding: encoding -*-</code></pre>
</div></div>
<div class="paragraph"><p>其中 <em>encoding</em> 可能的值可以參考<a href="http://docs.python.org/library/codecs.html#standard-encodings">這裡</a>，不過最常用的還是 UTF-8：</p></div>
<div class="literalblock">
<div class="content">
<pre><code># -*- encoding: utf-8 -*-</code></pre>
</div></div>
<div class="paragraph"><p>不過 Unicode string 還是得放在 <code>u'...'</code> 裡？</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../../_asciidoc/images/icons/note.png" alt="Note" />
</td>
<td class="content">
<div class="title">參考資料</div>
<div class="ulist"><ul>
<li>
<p>
<a href="http://docs.python.org/tutorial/interpreter.html#source-code-encoding">The Python Tutorial &gt; Using the Python Interpreter&gt; Source Code Encoding</a>
</p>
</li>
<li>
<p>
<a href="http://docs.python.org/library/codecs.html#standard-encodings">The Python Standard Library &gt; codecs — Codec registry and base classes &gt; Standard Encodings</a>
</p>
</li>
<li>
<p>
<a href="http://www.python.org/dev/peps/pep-0263/">PEP 0263&#8201;&#8212;&#8201;Defining Python Source Code Encodings</a>
</p>
</li>
</ul></div>
</td>
</tr></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_字串處理">字串處理</h2>
<div class="sectionbody">
<div class="ulist"><ul>
<li>
<p>
<code>instanceof(str, basestring, unicode)</code>
 *
</p>
</li>
</ul></div>
<div class="sect2">
<h3 id="_判斷字串內容">判斷字串內容</h3>
<div class="paragraph"><p>內建有下列幾個方法來判斷字串的內容：（而且至少包含一個字元）</p></div>
<div class="ulist"><ul>
<li>
<p>
<code>isalpha()</code> - 只包含英文字母。
</p>
</li>
<li>
<p>
<code>isdigit()</code> - 只包含數字。
</p>
</li>
<li>
<p>
<code>isalnum()</code> - 只包含英文字母跟數字。
</p>
</li>
<li>
<p>
<code>isspace()</code> - 只包含空白字元（whitespace）。
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content">
<pre><code>&gt;&gt;&gt; 'abc'.isalpha()
True
&gt;&gt;&gt; '123'.isdigit()
True
&gt;&gt;&gt; '123abc'.isalnum()
True
&gt;&gt;&gt; '123abc'.isalpha()
False
&gt;&gt;&gt; '123abc'.isdigit()
False
&gt;&gt;&gt; ''.isspace() <img src="../../_asciidoc/images/icons/callouts/1.png" alt="1" />
False
&gt;&gt;&gt; ' '.isspace()
True
&gt;&gt;&gt; ' \n\t  '.isspace()
True</code></pre>
</div></div>
<div class="colist arabic"><table>
<tr><td><img src="../../_asciidoc/images/icons/callouts/1.png" alt="1" /></td><td>
<code>isspace()</code> 不能用來判斷空字串（empty string）。
</td></tr>
</table></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_任意_attributes">任意 attributes</h2>
<div class="sectionbody">
<div class="paragraph"><p>Python 並沒有任何 builtin classes 支援任意給定 attributes，例如：</p></div>
<div class="listingblock">
<div class="content">
<pre><code>&gt;&gt;&gt; obj = object()
&gt;&gt;&gt; obj.att1 = 'val1'
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
AttributeError: 'object' object has no attribute 'att1'</code></pre>
</div></div>
<div class="paragraph"><p>不過 empty class 倒是可以滿足這個簡單的需求：</p></div>
<div class="listingblock">
<div class="content">
<pre><code>&gt;&gt;&gt; class Foo: pass
...
&gt;&gt;&gt; foo = Foo()
&gt;&gt;&gt; foo.att1 = 'val1'
&gt;&gt;&gt; print foo.att1
val1</code></pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../../_asciidoc/images/icons/note.png" alt="Note" />
</td>
<td class="content">
<div class="title">參考資料</div>
<div class="ulist"><ul>
<li>
<p>
<a href="http://stackoverflow.com/questions/2350817/dictionary-like-object-in-python-that-allows-setting-arbitrary-attributes">Dictionary-like object in Python that allows setting arbitrary attributes - Stack Overflow</a> (2010-02-08)
</p>
</li>
</ul></div>
</td>
</tr></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comprehension_expression">Comprehension Expression</h2>
<div class="sectionbody">
<div class="paragraph"><p>最早是從 list comprehension 的概念開始（結果一定是 <code>list</code>，但資料來源可以是任何 iterable）</p></div>
<div class="listingblock">
<div class="content">
<pre><code>&gt;&gt;&gt; nums = ()
&gt;&gt;&gt; [pow(num, 2) for num in nums]
[]
&gt;&gt;&gt; nums = (1, 3, 5, 7, 9)
&gt;&gt;&gt; [pow(num, 2) for num in nums]
[1, 9, 25, 49, 81]
&gt;&gt;&gt; [pow(num, 2) for num in nums if num % 3 == 0] # 甚至可以做條件過濾
[9, 81]

&gt;&gt;&gt; recs = {"beef": 30, "milk": 15}
&gt;&gt;&gt; [(k, recs[k] * 0.8) for k in recs]
[('milk', 12.0), ('beef', 24.0)]
    map(fun, iterable) 也提供類似的功能, 只是將 iterable 的每個 Item 傳入 fun 並取回結果而已
        &gt;&gt;&gt; map(abs, (-1, -2, 0, 1, 2))
[1, 2, 0, 1, 2]</code></pre>
</div></div>
<div class="paragraph"><p>Python 3.0 已經全面支援 comprehension, 包括 set 與 dictionary</p></div>
<div class="listingblock">
<div class="content">
<pre><code>&gt;&gt;&gt; [ord(x) for x in 'spaam'] # List of character ordinals
[115, 112, 97, 97, 109]
&gt;&gt;&gt; {ord(x) for x in 'spaam'} # Sets remove duplicates
{112, 97, 115, 109}
&gt;&gt;&gt; {x: ord(x) for x in 'spaam'} # Dictionary keys are unique
{'a': 97, 'p': 112, 's': 115, 'm': 109}</code></pre>
</div></div>
</div>
</div>
<div class="sect1">
<h2 id="_lambda">lambda</h2>
<div class="sectionbody">
<div class="paragraph"><p>簡單的說，lamabda 就是 anonymous function。</p></div>
<div class="ulist"><ul>
<li>
<p>
lambda 裡的語法不能太複雜，如果有複雜的 statements，可以考慮用 nested function。
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="_nested_functions">Nested Functions</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre><code>def main():

    def mod(dividend, divisor):
        remainder = dividend % divisor
        quotient = (dividend - remainder) / divisor
        return quotient, remainder
    print [mod(i, 2) for i in range(1, 11)]

if __name__ == '__main__':
    main()</code></pre>
</div></div>
<div class="paragraph"><p>執行結果如下：</p></div>
<div class="literalblock">
<div class="content">
<pre><code>[(0, 1), (1, 0), (1, 1), (2, 0), (2, 1), (3, 0), (3, 1), (4, 0), (4, 1), (5, 0)]</code></pre>
</div></div>
<div class="paragraph"><p>這是 <code>lambda</code> 辦不到的&#8230;</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../../_asciidoc/images/icons/note.png" alt="Note" />
</td>
<td class="content">
<div class="title">參考資料</div>
<div class="ulist"><ul>
<li>
<p>
<a href="http://docs.python.org/reference/compound_stmts.html">The Python Language Reference &gt; Compound statements</a> - 裡頭有這麼一段話：Functions are first-class objects. A “def” form executed inside a function definition defines a local function that can be returned or passed around. Free variables used in the nested function can access the local variables of the function containing the def. See section Naming and binding for details.
</p>
</li>
</ul></div>
</td>
</tr></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_descriptor_2">Descriptor</h2>
<div class="sectionbody">
<div class="ulist"><ul>
<li>
<p>
custom descriptor and several built-in python descriptors
</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../../_asciidoc/images/icons/tip.png" alt="Tip" />
</td>
<td class="content">在 Java 裡，Python 習慣稱幾個方法的組合為 protocol。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../../_asciidoc/images/icons/note.png" alt="Note" />
</td>
<td class="content">
<div class="title">參考資料</div>
<div class="ulist"><ul>
<li>
<p>
<a href="http://docs.python.org/howto/descriptor.html">Python HOWTOs &gt; Descriptor HowTo Guide</a>
</p>
</li>
<li>
<p>
<a href="http://docs.python.org/reference/datamodel.html#descriptors">The Python Language Reference&gt; Data model&gt; Implementing Descriptors</a>
</p>
</li>
<li>
<p>
<a href="http://www.learningpython.com/2010/04/25/introducing-descriptors-and-properties/">learning python » Blog Archive » Introducing Descriptors and Properties</a> (2010-04-25)
</p>
</li>
<li>
<p>
<a href="http://www.informit.com/articles/article.aspx?p=1309289">InformIT: Python Descriptors &gt; What Are Descriptors?</a> (2008-12-15)
</p>
</li>
<li>
<p>
<a href="http://blog.pythonisito.com/2008/08/lazy-descriptors.html">Just a little Python: Lazy Descriptors</a> (2008-08-22)
</p>
</li>
<li>
<p>
<a href="http://martyalchin.com/2007/nov/24/python-descriptors-part-2-of-2/">Python Descriptors, Part 2 of 2</a> (2007-11-24)
</p>
</li>
<li>
<p>
<a href="http://martyalchin.com/2007/nov/23/python-descriptors-part-1-of-2/">Python Descriptors, Part 1 of 2</a> (2007-11-23)
</p>
</li>
</ul></div>
</td>
</tr></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_參考資料">參考資料</h2>
<div class="sectionbody">
<div class="ulist"><ul>
<li>
<p>
<a href="http://docs.python.org/tutorial/index.html">The Python Tutorial</a>
</p>
</li>
<li>
<p>
<a href="http://docs.python.org/reference/index.html">The Python Language Reference</a>
</p>
</li>
<li>
<p>
<a href="http://en.wikipedia.org/wiki/Python_syntax_and_semantics">Python syntax and semantics - Wikipedia, the free encyclopedia</a>
</p>
</li>
</ul></div>
</div>
</div>
<div id="disqus_thread"></div>
<script type="text/javascript">
var disqus_shortname = 'imsardine'; // required: replace example with your forum shortname
(function() {
var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated 2012-12-17 01:02:10 CST
</div>
</div>
</div>
</div>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" src="http://s.gravatar.com/js/gprofiles.js?ver=e"></script>
<script>jQuery(document).ready(function($){ Gravatar.init(); });</script>
<script type="text/javascript">

  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>
</body>
</html>
